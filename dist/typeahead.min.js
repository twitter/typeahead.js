/*!
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a){var b="0.9.3",c={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},bind:a.proxy,bindAll:function(b){var c;for(var d in b)a.isFunction(c=b[d])&&(b[d]=a.proxy(c,b))},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},each:a.each,map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var h,i,f=this,g=arguments;return h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d,clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},tokenizeQuery:function(b){return a.trim(b).toLowerCase().split(/[\s]+/)},tokenizeText:function(b){return a.trim(b).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},d=function(){var a=/\s+/;return{on:function(b,c){var d;if(!c)return this;for(this._callbacks=this._callbacks||{},b=b.split(a);d=b.shift();)this._callbacks[d]=this._callbacks[d]||[],this._callbacks[d].push(c);return this},trigger:function(b,c){var d,e;if(!this._callbacks)return this;for(b=b.split(a);d=b.shift();)if(e=this._callbacks[d])for(var f=0;f<e.length;f+=1)e[f].call(this,{type:d,data:c});return this}}}(),e=function(){function d(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var b="typeahead:";return c.mixin(d.prototype,{trigger:function(a){var c=[].slice.call(arguments,1);this.$el.trigger(b+a,c)}}),d}(),f=function(){function e(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function f(){return(new Date).getTime()}function g(a){return JSON.stringify(c.isUndefined(a)?null:a)}function h(a){return JSON.parse(a)}var a,b;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(d){a=null}return b=a&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(b){return this.isExpired(b)&&this.remove(b),h(a.getItem(this._prefix(b)))},set:function(b,d,e){return c.isNumber(e)?a.setItem(this._ttlKey(b),g(f()+e)):a.removeItem(this._ttlKey(b)),a.setItem(this._prefix(b),g(d))},remove:function(b){return a.removeItem(this._ttlKey(b)),a.removeItem(this._prefix(b)),this},clear:function(){var b,c,d=[],e=a.length;for(b=0;e>b;b++)(c=a.key(b)).match(this.keyMatcher)&&d.push(c.replace(this.keyMatcher,""));for(b=d.length;b--;)this.remove(d[b]);return this},isExpired:function(b){var d=h(a.getItem(this._ttlKey(b)));return c.isNumber(d)&&f()>d?!0:!1}}:{get:c.noop,set:c.noop,remove:c.noop,clear:c.noop,isExpired:c.noop},c.mixin(e.prototype,b),e}(),g=function(){function a(a){c.bindAll(this),a=a||{},this.sizeLimit=a.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return c.mixin(a.prototype,{get:function(a){return this.cache[a]},set:function(a,b){var c;this.cachedKeysByAge.length===this.sizeLimit&&(c=this.cachedKeysByAge.shift(),delete this.cache[c]),this.cache[a]=b,this.cachedKeysByAge.push(a)}}),a}(),h=function(){function h(a){c.bindAll(this),a=c.isString(a)?{url:a}:a,f=f||new g,e=c.isNumber(a.maxParallelRequests)?a.maxParallelRequests:e||6,this.url=a.url,this.wildcard=a.wildcard||"%QUERY",this.filter=a.filter,this.replace=a.replace,this.ajaxSettings={type:"get",cache:a.cache,timeout:a.timeout,dataType:a.dataType||"json",beforeSend:a.beforeSend},this._get=(/^throttle$/i.test(a.rateLimitFn)?c.throttle:c.debounce)(this._get,a.rateLimitWait||300)}function i(){b++}function j(){b--}function k(){return e>b}var e,f,b=0,d={};return c.mixin(h.prototype,{_get:function(a,b){function d(d){var e=c.filter?c.filter(d):d;b&&b(e),f.set(a,d)}var c=this;k()?this._sendRequest(a).done(d):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(b){function f(){j(),d[b]=null,c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var c=this,e=d[b];return e||(i(),e=d[b]=a.ajax(b,this.ajaxSettings).always(f)),e},get:function(a,b){var g,h,d=this,e=encodeURIComponent(a||"");return b=b||c.noop,g=this.replace?this.replace(this.url,e):this.url.replace(this.wildcard,e),(h=f.get(g))?c.defer(function(){b(d.filter?d.filter(h):h)}):this._get(g,b),!!h}}),h}(),i=function(){function e(b){c.bindAll(this),c.isString(b.template)&&!b.engine&&a.error("no template engine specified"),b.local||b.prefetch||b.remote||a.error("one of local, prefetch, or remote is required"),this.name=b.name||c.getUniqueId(),this.limit=b.limit||5,this.filter=b.filter,this.minLength=b.minLength||1,this.header=b.header,this.footer=b.footer,this.valueKey=b.valueKey||"value",this.template=g(b.template,b.engine,this.valueKey),this.local=b.local,this.prefetch=b.prefetch,this.remote=b.remote,this.itemHash={},this.adjacencyList={},this.storage=b.name?new f(b.name):null}function g(a,b,d){var e,f;return c.isFunction(a)?e=a:c.isString(a)?(f=b.compile(a),e=c.bind(f.render,f)):e=function(a){return"<p>"+a[d]+"</p>"},e}var d={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return c.mixin(e.prototype,{_processLocalData:function(a){this._mergeProcessedData(this._processData(a))},_loadPrefetchData:function(e){function n(a){var b=e.filter?e.filter(a):a,h=f._processData(b),i=h.itemHash,j=h.adjacencyList;f.storage&&(f.storage.set(d.itemHash,i,e.ttl),f.storage.set(d.adjacencyList,j,e.ttl),f.storage.set(d.thumbprint,g,e.ttl),f.storage.set(d.protocol,c.getProtocol(),e.ttl)),f._mergeProcessedData(h)}var h,i,j,k,l,m,f=this,g=b+(e.thumbprint||"");return this.storage&&(h=this.storage.get(d.thumbprint),i=this.storage.get(d.protocol),j=this.storage.get(d.itemHash),k=this.storage.get(d.adjacencyList)),l=h!==g||i!==c.getProtocol(),e=c.isString(e)?{url:e}:e,e.ttl=c.isNumber(e.ttl)?e.ttl:864e5,e.filter=this.filter,j&&k&&!l?(this._mergeProcessedData({itemHash:j,adjacencyList:k}),m=a.Deferred().resolve()):m=a.getJSON(e.url).done(n),m},_transformDatum:function(a){var b=c.isString(a)?a:a[this.valueKey],d=a.tokens||c.tokenizeText(b),e={value:b,tokens:d};return c.isString(a)?(e.datum={},e.datum[this.valueKey]=a):e.datum=a,e.tokens=c.filter(e.tokens,function(a){return!c.isBlankString(a)}),e.tokens=c.map(e.tokens,function(a){return a.toLowerCase()}),e},_processData:function(a){var b=this,d={},e={};return c.each(a,function(a,f){var g=b._transformDatum(f),h=c.getUniqueId(g.value);d[h]=g,c.each(g.tokens,function(a,b){var d=b.charAt(0),f=e[d]||(e[d]=[h]);!~c.indexOf(f,h)&&f.push(h)})}),{itemHash:d,adjacencyList:e}},_mergeProcessedData:function(a){var b=this;c.mixin(this.itemHash,a.itemHash),c.each(a.adjacencyList,function(a,c){var d=b.adjacencyList[a];b.adjacencyList[a]=d?d.concat(c):c})},_getLocalSuggestions:function(a){var f,b=this,d=[],e=[],g=[];return c.each(a,function(a,b){var e=b.charAt(0);!~c.indexOf(d,e)&&d.push(e)}),c.each(d,function(a,c){var d=b.adjacencyList[c];return d?(e.push(d),(!f||d.length<f.length)&&(f=d),void 0):!1}),e.length<d.length?[]:(c.each(f,function(d,f){var i,j,h=b.itemHash[f];i=c.every(e,function(a){return~c.indexOf(a,f)}),j=i&&c.every(a,function(a){return c.some(h.tokens,function(b){return 0===b.indexOf(a)})}),j&&g.push(h)}),g)},initialize:function(){var b;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new h(this.remote):null,b=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return b},b},getSuggestions:function(a,b){function h(a){f=f.slice(0),c.each(a,function(a,b){var g,e=d._transformDatum(b);return g=c.some(f,function(a){return e.value===a.value}),!g&&f.push(e),f.length<d.limit}),b&&b(f)}var e,f,d=this,g=!1;a.length<this.minLength||(e=c.tokenizeQuery(a),f=this._getLocalSuggestions(e).slice(0,this.limit),f.length<this.limit&&this.transport&&(g=this.transport.get(a,h)),!g&&b&&b(f))}}),e}(),j=function(){function b(b){var d=this;c.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=a(b.hint),this.$input=a(b.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),c.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){d.specialKeyCodeMap[a.which||a.keyCode]||c.defer(d._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=e(this.$input)}function e(b){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return a=(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),b=(b||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),a===b}return c.mixin(b.prototype,d,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(a){var b=this.specialKeyCodeMap[a.which||a.keyCode];b&&this.trigger(b+"Keyed",a)},_compareQueryToInputValue:function(){var a=this.getInputValue(),b=f(this.query,a),c=b?this.query.length!==a.length:!1;c?this.trigger("whitespaceChanged",{value:this.query}):b||this.trigger("queryChanged",{value:this.query=a})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a),!b&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var d,a=this.$input.val().length,b=this.$input[0].selectionStart;return c.isNumber(b)?b===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0}}),b}(),k=function(){function f(b){c.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=a(b.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function g(a){return a.data("suggestion")}var b={suggestionsList:'<span class="tt-suggestions"></span>'},e={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return c.mixin(f.prototype,d,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(b){var c=a(b.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),c.addClass("tt-is-under-cursor")},_handleSelection:function(b){var c=a(b.currentTarget);this.trigger("suggestionSelected",g(c))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(a){var b,c,d,e;if(this.isVisible()){if(b=this._getSuggestions(),c=b.filter(".tt-is-under-cursor"),c.removeClass("tt-is-under-cursor"),d=b.index(c)+a,d=(d+1)%(b.length+1)-1,-1===d)return this.trigger("cursorRemoved"),void 0;-1>d&&(d=b.length-1),e=b.eq(d).addClass("tt-is-under-cursor"),this._ensureVisibility(e),this.trigger("cursorMoved",g(e))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(a){var b=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),c=this.$menu.scrollTop(),d=a.position().top,e=d+a.outerHeight(!0);0>d?this.$menu.scrollTop(c+d):e>b&&this.$menu.scrollTop(c+(e-b))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){var b={left:"0",right:"auto"},c={left:"auto",right:" 0"};"ltr"===a?this.$menu.css(b):this.$menu.css(c)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var a=this._getSuggestions().filter(".tt-is-under-cursor").first();return a.length>0?g(a):null},getFirstSuggestion:function(){var a=this._getSuggestions().first();return a.length>0?g(a):null},renderSuggestions:function(d,f){var i,j,l,m,n,g="tt-dataset-"+d.name,h='<div class="tt-suggestion">%body</div>',k=this.$menu.find("."+g);0===k.length&&(j=a(b.suggestionsList).css(e.suggestionsList),k=a("<div></div>").addClass(g).append(d.header).append(j).append(d.footer).appendTo(this.$menu)),f.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),l=document.createElement("div"),m=document.createDocumentFragment(),c.each(f,function(b,c){c.dataset=d.name,i=d.template(c.datum),l.innerHTML=h.replace("%body",i),n=a(l.firstChild).css(e.suggestion).data("suggestion",c),n.children().each(function(){a(this).css(e.suggestionChild)}),m.appendChild(n[0])}),k.show().find(".tt-suggestions").html(m)):this.clearSuggestions(d.name),this.trigger("suggestionsRendered")},clearSuggestions:function(a){var b=a?this.$menu.find(".tt-dataset-"+a):this.$menu.find('[class^="tt-dataset-"]'),c=b.find(".tt-suggestions");b.hide(),c.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),f}(),l=function(){function f(a){var b,d,e;c.bindAll(this),this.$node=g(a.input),this.datasets=a.datasets,this.dir=null,this.eventBus=a.eventBus,b=this.$node.find(".tt-dropdown-menu"),d=this.$node.find(".tt-query"),e=this.$node.find(".tt-hint"),this.dropdownView=new k({menu:b}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new j({input:d,hint:e}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function g(c){var d=a(b.wrapper),f=a(b.dropdown),g=a(c),h=a(b.hint);d=d.css(e.wrapper),f=f.css(e.dropdown),h.css(e.hint).css({backgroundAttachment:g.css("background-attachment"),backgroundClip:g.css("background-clip"),backgroundColor:g.css("background-color"),backgroundImage:g.css("background-image"),backgroundOrigin:g.css("background-origin"),backgroundPosition:g.css("background-position"),backgroundRepeat:g.css("background-repeat"),backgroundSize:g.css("background-size")}),g.data("ttAttrs",{dir:g.attr("dir"),autocomplete:g.attr("autocomplete"),spellcheck:g.attr("spellcheck"),style:g.attr("style")}),g.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(e.query);try{!g.attr("dir")&&g.attr("dir","auto")}catch(i){}return g.wrap(d).parent().prepend(h).append(f)}function h(a){var b=a.find(".tt-query");c.each(b.data("ttAttrs"),function(a,d){c.isUndefined(d)?b.removeAttr(a):b.attr(a,d)}),b.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(a),a.remove()}var b={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return c.isMsie()&&c.mixin(e.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),c.isMsie()&&c.isMsie()<=7&&(c.mixin(e.wrapper,{display:"inline",zoom:"1"}),c.mixin(e.query,{marginTop:"-1px"})),c.mixin(f.prototype,d,{_managePreventDefault:function(a){var c,d,b=a.data,e=!1;switch(a.type){case"tabKeyed":c=this.inputView.getHintValue(),d=this.inputView.getInputValue(),e=c&&c!==d;break;case"upKeyed":case"downKeyed":e=!b.shiftKey&&!b.ctrlKey&&!b.metaKey}e&&b.preventDefault()},_setLanguageDirection:function(){var a=this.inputView.getLanguageDirection();a!==this.dir&&(this.dir=a,this.$node.css("direction",a),this.dropdownView.setLanguageDirection(a))},_updateHint:function(){var f,g,h,i,j,a=this.dropdownView.getFirstSuggestion(),b=a?a.value:null,d=this.dropdownView.isVisible(),e=this.inputView.isOverflow();b&&d&&!e&&(f=this.inputView.getInputValue(),g=f.replace(/\s{2,}/g," ").replace(/^\s+/g,""),h=c.escapeRegExChars(g),i=new RegExp("^(?:"+h+")(.*$)","i"),j=i.exec(b),this.inputView.setHintValue(f+(j?j[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(a){var b=a.data;this.inputView.setInputValue(b.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(a){this.dropdownView["blured"===a.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(a){var b=a.data;b.shiftKey||b.ctrlKey||b.metaKey||this.dropdownView["upKeyed"===a.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(a){var b="suggestionSelected"===a.type,d=b?a.data:this.dropdownView.getSuggestionUnderCursor();d&&(this.inputView.setInputValue(d.value),b?this.inputView.focus():a.data.preventDefault(),b&&c.isMsie()?c.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",d.datum,d.dataset))},_getSuggestions:function(){var a=this,b=this.inputView.getQuery();c.isBlankString(b)||c.each(this.datasets,function(c,d){d.getSuggestions(b,function(c){b===a.inputView.getQuery()&&a.dropdownView.renderSuggestions(d,c)})})},_autocomplete:function(a){var b,c,d,e,f;("rightKeyed"!==a.type&&"leftKeyed"!==a.type||(b=this.inputView.isCursorAtEnd(),c="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===a.type:"rightKeyed"===a.type,b&&!c))&&(d=this.inputView.getQuery(),e=this.inputView.getHintValue(),""!==e&&d!==e&&(f=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(f.value),this.eventBus.trigger("autocompleted",f.datum,f.dataset)))},_propagateEvent:function(a){this.eventBus.trigger(a.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),h(this.$node),this.$node=null},setQuery:function(a){this.inputView.setQuery(a),this.inputView.setInputValue(a),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),f}();!function(){var f,b={},d="ttView";f={initialize:function(f){function h(){var f,b=a(this),h=new e({el:b});f=c.map(g,function(a){return a.initialize()}),b.data(d,new l({input:b,eventBus:h=new e({el:b}),datasets:g})),a.when.apply(a,f).always(function(){c.defer(function(){h.trigger("initialized")})})}var g;return f=c.isArray(f)?f:[f],0===f.length&&a.error("no datasets provided"),g=c.map(f,function(a){var c=b[a.name]?b[a.name]:new i(a);return a.name&&(b[a.name]=c),c}),this.each(h)},destroy:function(){function b(){var b=a(this),c=b.data(d);c&&(c.destroy(),b.removeData(d))}return this.each(b)},setQuery:function(b){function c(){var c=a(this).data(d);c&&c.setQuery(b)}return this.each(c)}},jQuery.fn.typeahead=function(a){return f[a]?f[a].apply(this,[].slice.call(arguments,1)):f.initialize.apply(this,arguments)}}()}(window.jQuery);